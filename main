import random
from art import logo
cards = [11, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10]

def deal_card(user):
    number=random.choice(cards)
    user.append(number)

def card_sum(user):
    if 11 in user and sum(user)>21:
        user.remove(11)
        user.append(1)
    return sum(user)

def rule_of_17():
    while card_sum(dealer_cards)<17:
        deal_card(dealer_cards)
        card_sum(dealer_cards)
        if card_sum(dealer_cards) < 17:
            deal_card(dealer_cards)
    print(f"Computer's final hand: {dealer_cards}, final score: {card_sum(dealer_cards)}")



def check(user):
    if user>21:
        print(f"Your final hand: {user_cards}, final score: {card_sum(user_cards)}")
        print("You went over. You lose 😭")


def compare(user_score,dealer_score):
    if dealer_score>21:
        return "Opponent went over. You win 😁\n "
    elif user_score>21:
        return ""
    elif user_score==dealer_score:
        return "Draw 🙃\n "
    elif dealer_score==21:
        return "Lose, opponent has Blackjack 😱\n "
    elif user_score==21:
        return "Win with a Blackjack 😎\n "
    elif user_score>dealer_score:
        return "You win 😃\n "
    else:
        return "You lose 😤\n "

loop=True

while loop :
    user_cards = []
    dealer_cards = []
    start=input("Do you want to play a game of Blackjack? Type 'y' or 'n': ").lower()
    loop2=True
    if start=="y":
        print("\n"*100)
        print(logo)
        deal_card(user_cards)
        deal_card(user_cards)
        deal_card(dealer_cards)
        print(f"Your cards: {user_cards}, current score: {card_sum(user_cards)}")
        print(f"Computer's first card: {dealer_cards}, current score: {card_sum(dealer_cards)}")
        while loop2:
            another_card = input("Type 'y' to get another card, type 'n' to pass: ").lower()
            if another_card=="y":
                deal_card(user_cards)
                print(f"Your cards: {user_cards}, current score: {card_sum(user_cards)}")
                print(f"Computer's first card: {dealer_cards}, current score: {card_sum(dealer_cards)}")
                check(card_sum(user_cards))
                if card_sum(user_cards)>21:
                    loop2=False

            else:
                loop2=False
                print(f"Your final hand: {user_cards}, final score: {card_sum(user_cards)}")
                rule_of_17()
        print(compare(card_sum(user_cards),card_sum(dealer_cards)))

    else:
        loop=False

